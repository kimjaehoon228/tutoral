<%- include('includes/head.ejs') %>
</head>
<body>
<%- include('includes/navigation.ejs') %>
    <main>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h1><%= (admin) ?'관리자상품리스트': '상품리스트' %></h1>
                    
                    <% if (products.length) { %>
                    <div class="row"> 
                        <% for(let product of products) { %>
                          <div class="col-md-3">
                            <div class="product">
                                <div class="text-center">
                                    <img src="<%= product.image %>" class="img-fluid">
                                </div>
                                <h3>
                                    <%= product.title %>
                                </h3>
                                <div>price: <strong>$<%= product.price %></strong></div>
                                <p><%= product.description %></p>
                                <% if (admin) { %> 
                                    <div class="my-2 text-center d-flex justify-content-center">
                                        <a href="/product/details/<%= product.id %>" 
                                        class="btn btn-primary mx-2">Edit</a>
                                        <a href="/product/details/<%= product.id %>" 
                                        class="btn btn-primary mx-2">Delete</a>
                                    </div>
                                <% } else { %>
                                <div class="my-2 text-center d-flex justify-content-center">
                                    <a href="/product/details/<%= product.id %>" 
                                    class="btn btn-primary mx-2">자세히</a>
                                    <%- include('includes/CartButton.ejs',{product: product}) %>
                                </div>
                                <% } %>
                            </div>
                          </div>
                         <% } %>
                    </div>
                         <% } else { %>
                    <div>
                        No products Available
                    </div>
                    <% } %>
                </div>
            </div>
        </div>
    </main>    
<%- include('includes/footer.ejs') %>